# Spring Bean

## 등록 방법

- `@Configuration`
    - 클래스에 붙이는 어노테이션
    - `@Bean`을 사용할 때 함께 사용해 주어야 한다.

- `@Bean`
    - 메서드에 붙는 어노테이션
    - 메서드에서 반환되는 객체를 스프링 빈으로 등록한다.

## @Component

- 주어진 클래스를 **컴포넌트**로 간주한다.
- 컴포넌트로 간주된 클래스들은 스프링 서버가 뜰 때 자동으로 감지된다.
- `@RestController`, `@Service`, `@Repository`, `@Configuration` 어노테이션은 모두 `@Component` 어노테이션을 가지고 있다.
    - `@Component` 어노테이션 덕분에 지금까지 모두 자동으로 감지된 것이다.

> - `@Service`, `@Repository`
>   - 개발자가 직접 만든 클래스를 스프링 빈으로 등록할 때 사용한다.
> - `@Configuration` + `@Bean`
>   - 외부 라이브러리, 프레임워크에서 만든 클래스를 등록할 때 사용한다.
> - `@Component`
>   - Controller, Service, Repository 모두 아닌 추가적인 클래스를 스프링 빈으로 등록할 때 사용한다.

## 스프링 빈을 주입 받는 방법

- 생성자를 이용해 주입받는 방식
  - 가장 권장하는 방식이다.
- `setter`를 통해 주입받는 방식
- 필드에 직접 주입하는 방법 
  - 기본적으로 권장되지 않는다.
  - `setter`를 통해 다른 인스턴스로 교체해 동작에 문제가 생길 수 있다.
  - 필드에 바로 주입하게 되면 테스트가 어렵다.

> `@Autowired`
> - 자동으로 연결시켜주는 어노테이션
> - 스프링 버전이 올라가면서 생략 가능하다.

## 주입받는 스프링 빈 선택

- `@Qualifier`
  - 스프링 빈을 사용하는 쪽, 스프링 빈을 등록하는 쪽 모두 `@Quialifier`를 사용할 수 있다.
  - 스프링 빈을 사용하는 쪽에서만 쓰면, 스프링 빈의 이름을 명시해야 한다. 
- `@Primary`
  - 우선적으로 주입받을 스프링 빈을 지정하는 어노테이션

> `@Primary` vs `@Qualifier`
> 
> 스프링을 일반적으로 더 특수하게 사용자가 명시해준 것을 우선순위가 높게 가져간다.<br>
> 사용하는 쪽에서 직접 적어준 `@Qualifer`가 우선순위를 갖는다.
