# 영속성 컨텍스트(Persistence Context)

- 테이블과 매핑된 Entity 객체를 관리/보관하는 역할을 한다.
- 스프링에서는 트랜잭션을 사용하면 영속성 컨텍스트가 생성되고, 트랜잭션이 종료되면 영속성 컨텍스트가 종료된다.
- 영속성 컨텍스트의 특성들을 통해, 데이터의 일관성을 유지하고, 데이터베이스와의 통신 효율을 높일 수 있다.

## 기능

1. 변경 감지(Dirty Check)
    - 영속성 컨텍스트 안에서 불러와진 Entity 객체는 명시적으로 save하지 않더라도, **변경을 감지**를 통해 자동으로 저장된다.
2. 쓰기 지연
    - DB의 INSERT/UPDATE/DELETE에 대한 SQL을 즉시 보내는 것이 아니라, 트랜잭션이 COMMIT될 때 모아서 한 번만 날린다.
    - 이렇게 하면 네트워크 비용과 데이터베이스 리소스 사용을 최소화하여 성능을 개선할 수 있다.
3. 1차 캐싱
    - 영속성 컨텍스트는 조회된 Entity를 내부 캐시에 저장한다.
    - 같은 트랜잭션 내에서 동일한 Entity를 다시 조회할 때는 데이터베이스에 추가적인 쿼리를 실행하지 않고, 1차 캐시에서 직접 객체를 반환한다.
    - 이렇게 되면 데이터베이스 접근 횟수를 줄여 성능을 향상된다.
    - 캐싱된 객체는 완전히 동일하다.
4. 지연 로딩(Lazy Loading)
   - 연결되어 있는 객체를 꼭 필요한 순간에만 가져온다.
